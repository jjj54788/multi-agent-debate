# Demo 使用指南

本文档提供多智能体讨论系统的详细使用示例和最佳实践。

## 目录

- [快速体验](#快速体验)
- [使用场景](#使用场景)
- [功能演示](#功能演示)
- [最佳实践](#最佳实践)
- [常见问题](#常见问题)

## 快速体验

### 第一个讨论：远程工作的未来

让我们通过一个实际例子来体验系统的完整功能。

**步骤1：创建讨论**

1. 访问系统主页，点击"开始新讨论"按钮
2. 输入讨论话题：**"远程工作是否会成为未来的主流工作模式？"**
3. 选择参与智能体：
   - **支持者**（Supporter）：提供积极的观点和可行性分析
   - **反对者**（Opponent）：质疑远程工作的局限性和挑战
   - **中立者**（Neutral）：平衡分析双方观点
4. 设置讨论轮数：**3轮**（建议首次体验使用较少轮数）
5. 点击"开始讨论"

**步骤2：观看讨论**

讨论开始后，您会看到：

- **左侧讨论记录**：实时显示每个智能体的发言内容
- **右侧时间线视图**：按轮次展示讨论进程
- **顶部智能体卡片**：显示每个智能体的当前状态（思考中、发言中、空闲）
- **进度指示器**：显示当前讨论进度（第X轮/共Y轮）

每条发言都会显示评分信息：

- 📊 **总分**：满分30分
- 🧠 **逻辑分**：满分10分
- 💡 **创新分**：满分10分
- 💬 **表达分**：满分10分
- 📝 **评分理由**：点击"查看评分理由"展开详细说明

**步骤3：查看分析**

讨论完成后，系统自动显示：

**讨论亮点**

- **最佳观点**：逻辑最严密、论证最充分的发言
- **最创新观点**：思维最新颖、突破性最强的发言
- **精彩金句**：表达最精彩、最具感染力的语句

**完整总结**

结构化的讨论总结，包括：
- 讨论核心主题
- 各方主要论点
- 讨论演进过程
- 最终结论

**关键观点**

提取的核心论点列表，标注提出者和所属轮次

**分歧点**

主要争议点归纳，包括各方立场和核心矛盾

## 使用场景

### 场景1：决策分析

**适用情况**：需要从多个角度评估一个决策方案

**推荐配置**：
- **智能体**：支持者、反对者、中立者、批判者
- **轮数**：5-7轮
- **话题示例**：
  - "公司是否应该采用四天工作制？"
  - "是否应该投资区块链技术？"
  - "是否应该扩大海外市场？"

**使用技巧**：
- 选择支持者和反对者确保观点的对立性
- 加入中立者提供客观评估
- 加入批判者进行逻辑严密性检验
- 使用较多轮数让讨论充分展开

### 场景2：头脑风暴

**适用情况**：需要激发创新思维，探索多种可能性

**推荐配置**：
- **智能体**：创新者、支持者、批判者
- **轮数**：3-5轮
- **话题示例**：
  - "如何提升用户留存率？"
  - "如何优化产品的用户体验？"
  - "如何降低运营成本？"

**使用技巧**：
- 创新者提供新颖的思路和方法
- 支持者帮助完善和落地创新想法
- 批判者识别潜在风险和挑战
- 使用中等轮数平衡创意数量和讨论深度

### 场景3：观点验证

**适用情况**：需要验证某个观点或假设的合理性

**推荐配置**：
- **智能体**：批判者、反对者、中立者
- **轮数**：3-5轮
- **话题示例**：
  - "AI 会取代大部分人类工作吗？"
  - "加密货币是未来的货币形式吗？"
  - "气候变化是人类活动造成的吗？"

**使用技巧**：
- 批判者进行严格的逻辑分析
- 反对者提出质疑和反例
- 中立者提供平衡的评估
- 关注评分中的逻辑分，识别论证漏洞

### 场景4：教育研究

**适用情况**：学习某个主题的多种观点和深层逻辑

**推荐配置**：
- **智能体**：支持者、反对者、中立者、创新者
- **轮数**：5-10轮
- **话题示例**：
  - "人工智能的伦理边界在哪里？"
  - "基因编辑技术应该如何监管？"
  - "教育的本质是什么？"

**使用技巧**：
- 选择多个智能体获得全面的视角
- 使用较多轮数让讨论深入展开
- 重点关注关键观点和分歧点
- 查看评分理由了解论证的优劣

## 功能演示

### 功能1：实时讨论

**演示目标**：体验实时消息推送和状态同步

**操作步骤**：

1. 创建一个新讨论（任意话题，2个智能体，3轮）
2. 观察智能体状态的变化：
   - 空闲 → 思考中（智能体正在生成回复）
   - 思考中 → 发言中（回复生成完成，正在保存）
   - 发言中 → 空闲（消息已保存并广播）
3. 观察新消息的实时出现：
   - 消息立即显示在讨论记录中
   - 时间线视图同步更新
   - 进度指示器更新当前轮次

**预期效果**：
- 状态更新流畅，无明显延迟
- 消息按照发言顺序正确显示
- 界面响应灵敏，无卡顿现象

### 功能2：评分系统

**演示目标**：了解评分机制和评分标准

**操作步骤**：

1. 等待讨论进行一段时间（至少2-3条消息）
2. 查看每条消息的评分信息：
   - 总分（0-30分）
   - 逻辑分（0-10分）
   - 创新分（0-10分）
   - 表达分（0-10分）
3. 点击"查看评分理由"按钮，展开详细说明
4. 比较不同消息的评分差异

**预期效果**：
- 评分在消息发送后1-5秒内完成
- 评分理由详细且有针对性
- 高分消息通常具有严密的逻辑、新颖的观点或精彩的表达
- 低分消息可能存在逻辑漏洞、缺乏创新或表达不清

**评分标准参考**：

| 维度 | 高分特征（8-10分） | 中等特征（5-7分） | 低分特征（0-4分） |
|------|-------------------|------------------|------------------|
| **逻辑** | 论证严密、推理合理、证据充分 | 基本合理、有一定依据 | 逻辑混乱、缺乏依据 |
| **创新** | 观点新颖、思维突破、方法独特 | 有一定新意、角度较新 | 陈词滥调、缺乏新意 |
| **表达** | 语言清晰、论述有力、修辞精彩 | 表达清楚、条理尚可 | 表达不清、逻辑混乱 |

### 功能3：讨论总结

**演示目标**：了解自动总结和亮点提取功能

**操作步骤**：

1. 等待讨论完成（所有轮次结束）
2. 系统自动显示总结部分，包括：
   - 讨论亮点（最佳观点、最创新观点、精彩金句）
   - 完整总结（结构化的讨论概述）
   - 关键观点（核心论点列表）
   - 分歧点（主要争议点归纳）
3. 阅读总结内容，对比原始讨论记录
4. 验证总结的准确性和完整性

**预期效果**：
- 总结在讨论完成后10-30秒内生成
- 总结内容准确反映讨论核心
- 亮点选择合理，确实是高质量的发言
- 关键观点和分歧点归纳清晰

### 功能4：历史记录

**演示目标**：体验讨论历史的查看和回放

**操作步骤**：

1. 完成至少2个讨论
2. 返回主页，点击"查看历史讨论"
3. 浏览历史记录列表，查看：
   - 讨论话题
   - 参与智能体
   - 讨论状态（进行中、已完成）
   - 创建时间
4. 点击任意讨论，查看完整内容
5. 验证历史讨论的数据完整性：
   - 所有消息正确显示
   - 评分信息完整
   - 总结和亮点正确显示

**预期效果**：
- 历史记录列表加载迅速
- 讨论详情页面与实时讨论页面功能一致
- 数据完整，无丢失或错误
- 支持按话题搜索和时间筛选

### 功能5：页面刷新恢复

**演示目标**：验证页面刷新后的状态恢复

**操作步骤**：

1. 在讨论进行中或完成后，刷新浏览器页面（F5）
2. 观察页面重新加载后的状态：
   - WebSocket 自动重新连接
   - 历史消息自动加载
   - 讨论状态正确显示
   - 评分信息完整显示
   - 总结和亮点（如果已生成）正确显示
3. 验证功能的可用性：
   - 可以继续观看讨论（如果未完成）
   - 可以查看评分理由
   - 可以滚动查看所有消息

**预期效果**：
- 页面刷新后自动恢复到之前的状态
- 所有数据完整，无丢失
- WebSocket 连接成功，实时功能正常
- 用户体验流畅，无明显中断

## 最佳实践

### 话题设计

**好的话题特征**：
- **明确具体**：避免过于宽泛或模糊的话题
- **有争议性**：存在多种合理的观点和立场
- **有实际意义**：与现实问题或决策相关
- **适度复杂**：既不过于简单也不过于复杂

**示例对比**：

| 不推荐 | 推荐 | 原因 |
|--------|------|------|
| "AI好不好？" | "AI在医疗领域的应用是否应该受到更严格的监管？" | 后者更具体、更有争议性 |
| "如何提升业绩？" | "通过降价促销还是提升产品质量来提升业绩？" | 后者提供了明确的选择方向 |
| "量子计算的未来" | "量子计算是否会在10年内取代传统计算机？" | 后者有明确的时间范围和判断标准 |

### 智能体选择

**基本原则**：
- **至少2个智能体**：确保讨论的互动性
- **观点多样性**：选择不同立场的智能体（如支持者+反对者）
- **角色互补性**：选择功能互补的智能体（如创新者+批判者）
- **适度数量**：建议2-4个智能体，过多会导致讨论冗长

**常用组合**：

| 组合 | 适用场景 | 特点 |
|------|----------|------|
| 支持者 + 反对者 | 决策分析 | 观点对立，论证充分 |
| 创新者 + 批判者 | 头脑风暴 | 创新与验证结合 |
| 支持者 + 反对者 + 中立者 | 全面分析 | 多角度、平衡性强 |
| 批判者 + 反对者 | 观点验证 | 严格的逻辑检验 |
| 创新者 + 支持者 + 批判者 | 方案设计 | 创新、完善、验证 |

### 轮数设置

**推荐轮数**：

| 场景 | 推荐轮数 | 原因 |
|------|----------|------|
| 快速体验 | 2-3轮 | 快速了解系统功能 |
| 一般讨论 | 3-5轮 | 平衡深度和时间 |
| 深入分析 | 5-7轮 | 充分展开论证 |
| 复杂问题 | 7-10轮 | 全面探讨各个方面 |

**注意事项**：
- 轮数过少（1轮）：讨论不充分，缺乏互动
- 轮数过多（>10轮）：讨论冗长，可能出现重复
- 智能体数量越多，每轮讨论时间越长
- 建议根据话题复杂度和可用时间灵活调整

### 结果解读

**关注重点**：

1. **评分趋势**：
   - 高分消息通常包含核心观点和关键论证
   - 评分的变化反映讨论质量的演进
   - 特别关注逻辑分低但创新分高的消息（可能是突破性观点）

2. **讨论亮点**：
   - 最佳观点：学习严密的论证方法
   - 最创新观点：获取新颖的思路和视角
   - 精彩金句：提炼核心观点的表达方式

3. **关键观点**：
   - 识别各方的核心论点
   - 理解论点之间的逻辑关系
   - 评估论点的合理性和适用性

4. **分歧点**：
   - 理解争议的本质和根源
   - 评估各方立场的合理性
   - 思考如何化解或平衡分歧

**避免误区**：
- ❌ 仅关注总分高的消息，忽略单项高分的消息
- ❌ 将 AI 的观点视为绝对真理，缺乏批判性思考
- ❌ 忽略评分理由，仅看分数
- ❌ 只看总结，不看原始讨论内容

## 常见问题

### Q1: 讨论需要多长时间？

**答**：讨论时间取决于智能体数量、轮数和 AI API 响应速度。

**参考时间**：
- 2个智能体，3轮：约2-3分钟
- 3个智能体，5轮：约5-8分钟
- 4个智能体，7轮：约10-15分钟

**影响因素**：
- AI API 响应速度（通常5-15秒/条消息）
- 评分系统处理时间（并行执行，不影响主流程）
- 总结生成时间（10-30秒）

### Q2: 为什么评分信息没有立即显示？

**答**：评分系统采用异步处理机制，在消息发送后1-5秒内完成评分。

**原因**：
- 评分需要调用 AI API，有一定延迟
- 异步处理避免阻塞主讨论流程
- 确保讨论的流畅性

**解决方法**：
- 稍等片刻，评分会自动显示
- 刷新页面可以看到已完成的评分
- 如果长时间未显示，可能是 API 调用失败，查看服务器日志

### Q3: 页面刷新后讨论记录消失了怎么办？

**答**：这是之前的一个已知问题，现已修复。最新版本支持页面刷新后自动恢复讨论记录。

**解决方法**：
- 确保使用最新版本的系统
- 刷新页面后，WebSocket 会自动重新连接并加载历史消息
- 如果问题仍然存在，检查浏览器控制台是否有错误信息

### Q4: 如何自定义智能体？

**答**：系统支持添加自定义智能体，需要在数据库中插入新记录。

**步骤**：

1. 连接到数据库
2. 插入新的智能体记录：

```sql
INSERT INTO agents (id, name, role, description, systemPrompt, aiProvider)
VALUES (
  'custom-agent-id',
  '自定义智能体名称',
  'custom',
  '角色描述：这个智能体的特点和定位',
  '系统提示词：你是一个...，你的任务是...',
  'openai'
);
```

3. 刷新创建讨论页面，新智能体会出现在选择列表中

**注意事项**：
- `id` 必须唯一
- `systemPrompt` 决定智能体的行为和风格
- `aiProvider` 选择 AI 提供商（openai、anthropic等）

### Q5: 如何导出讨论结果？

**答**：当前版本暂不支持直接导出功能，但您可以通过以下方式保存讨论结果：

**临时方案**：
- 复制讨论内容到文本编辑器
- 使用浏览器的"打印"功能保存为 PDF
- 截图保存关键内容

**未来计划**：
- 导出为 PDF 文件
- 导出为 Markdown 文件
- 导出为 JSON 格式（包含完整数据）

### Q6: 讨论中途可以暂停或停止吗？

**答**：当前版本不支持暂停或停止功能，讨论一旦开始会自动运行到结束。

**建议**：
- 使用较少的轮数进行快速测试
- 关闭浏览器标签页不会停止讨论（后端继续运行）
- 讨论完成后可以在历史记录中查看完整内容

**未来计划**：
- 添加暂停/恢复功能
- 添加提前结束功能
- 添加实时调整轮数功能

### Q7: 如何提高讨论质量？

**答**：讨论质量取决于话题设计、智能体选择和系统提示词。

**建议**：

1. **优化话题**：
   - 使用具体、明确的话题
   - 提供必要的背景信息
   - 设置明确的讨论范围

2. **选择合适的智能体**：
   - 确保观点多样性
   - 选择角色互补的智能体
   - 避免过多智能体导致讨论冗长

3. **调整系统提示词**：
   - 修改智能体的系统提示词
   - 明确智能体的角色和任务
   - 提供具体的讨论指导

4. **使用适当的轮数**：
   - 简单话题使用较少轮数
   - 复杂话题使用较多轮数
   - 避免轮数过多导致重复

### Q8: 系统支持哪些 AI 提供商？

**答**：系统支持多种 AI 提供商，包括：

- **Manus AI**（内置，推荐）
- **OpenAI**（GPT-4、GPT-3.5等）
- **Anthropic**（Claude系列）

**配置方法**：

在 `.env` 文件中配置 AI API 密钥：

```env
# Manus AI（内置）
BUILT_IN_FORGE_API_KEY="your-manus-api-key"

# OpenAI
OPENAI_API_KEY="your-openai-api-key"

# Anthropic
ANTHROPIC_API_KEY="your-anthropic-api-key"
```

在创建智能体时指定 `aiProvider` 字段。

---

**文档版本**: 1.0  
**最后更新**: 2026-01-12  
**作者**: Manus AI

**需要帮助？**  
如有问题或建议，请访问 [GitHub Issues](https://github.com/yourusername/multi-agent-debate/issues)
